%h2 Sign up
= semantic_form_for(resource, :as => resource_name, :url => registration_path(resource_name)) do |f|
  = devise_error_messages!
  = f.inputs do
    = f.input :name
    = f.input :email
    = f.input :organization
    = f.input :role, :as => :radio, :collection => User::REGISTERABLE_ROLES.map{|r|["#{r.humanize} - #{User::ROLE_MAP[r.to_sym]}",r]}, :label => "Requested Role"
    = f.input :password
    = f.input :password_confirmation
    = f.input :newsletter, :label => "Subscribe to the GLATOS newsletter"
  = f.buttons do
    = f.submit "Sign up"
%br
= render :partial => "devise/shared/links"

:javascript
  $(document).ready(function() {
    // Select the Public radio if none are selected
    var $radios = $('input:radio[name=user[role]]');
    if($radios.is(':checked') === false) {
      $radios.filter('[value=general]').attr('checked', true);
    }
  });
